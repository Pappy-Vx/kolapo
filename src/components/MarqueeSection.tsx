"use client";

import { motion, useScroll, useTransform, useSpring } from "framer-motion";
import { useRef } from "react";

// Tech stack with Simple Icons SVG paths (inline SVGs for reliability)
const techRow1 = [
  { name: "C#", color: "#239120", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M12 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0zm-.5 3.5h1v2.1l1.8-1.06.5.87-1.8 1.05 1.8 1.05-.5.87-1.8-1.06v2.11h-1v-2.11l-1.8 1.06-.5-.87 1.8-1.05-1.8-1.05.5-.87 1.8 1.06zm-5 5h2.1l-1.06-1.8.87-.5 1.05 1.8 1.05-1.8.87.5-1.06 1.8h2.11v1H10.2l1.06 1.8-.87.5-1.05-1.8-1.05 1.8-.87-.5 1.06-1.8H6.5z"/></svg> },
  { name: "dotnet", color: "#512BD4", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M24 8.77h-2.468v7.565h-1.425V8.77h-2.462V7.53H24zm-6.852 7.565h-4.821V7.53h4.63v1.24h-3.205v2.494h2.953v1.234h-2.953v2.604h3.396zm-6.708 0H8.882L4.78 9.863a2.896 2.896 0 01-.258-.51h-.036c.032.189.048.592.048 1.21v5.772H3.157V7.53h1.659l3.965 6.32c.167.261.275.442.323.54h.024a4.473 4.473 0 01-.048-1.048V7.53h1.378zm-7.02-.455a.9.9 0 01-.632.263.9.9 0 01-.637-.263.87.87 0 01-.263-.632c0-.245.088-.456.263-.632a.887.887 0 01.637-.258c.245 0 .456.086.632.258a.863.863 0 01.263.632.863.863 0 01-.263.632z"/></svg> },
  { name: "React", color: "#61DAFB", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M14.23 12.004a2.236 2.236 0 01-2.235 2.236 2.236 2.236 0 01-2.236-2.236 2.236 2.236 0 012.235-2.236 2.236 2.236 0 012.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.31 0-.592.068-.838.182-.837.484-1.004 1.792-.313 3.705.227.63.538 1.296.909 1.978C4.27 8.18 2.74 9.54 2.065 10.933c-.328.674-.458 1.268-.404 1.768.088.814.786 1.346 1.9 1.346 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.313 0 .592-.066.84-.18.837-.485 1.003-1.793.312-3.706a14.743 14.743 0 00-.908-1.98c2.592-.98 4.12-2.342 4.798-3.735.327-.674.457-1.267.403-1.768-.088-.814-.786-1.344-1.9-1.344zM18.474 5.2a.79.79 0 01.072.382c-.013.292-.14.685-.397 1.212-.583 1.194-1.96 2.42-4.226 3.3a21.993 21.993 0 00-1.588-2.348c1.516-1.407 3.082-2.384 4.358-2.636a1.44 1.44 0 01.28-.026c.2 0 .482.064.585.104l.916.013zM12 15.685c-1.102.998-2.18 1.706-3.118 2.1-.508.214-.93.322-1.276.322-.22 0-.5-.07-.6-.106l-.916-.013a.79.79 0 01-.072-.383c.013-.292.14-.685.396-1.212.584-1.194 1.96-2.42 4.227-3.3.544.816 1.076 1.598 1.588 2.348-1.516 1.407-3.083 2.384-4.358 2.636a1.44 1.44 0 01-.28.026c.056 0-.016-.002.008.002 1.346 0 3.107-.96 4.888-2.623.093.087.186.172.28.255z"/></svg> },
  { name: "TypeScript", color: "#3178C6", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 011.306.34v2.458a3.95 3.95 0 00-.643-.361 5.093 5.093 0 00-.717-.26 5.453 5.453 0 00-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 00-.623.242c-.17.104-.3.229-.393.374a.888.888 0 00-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 01-1.012 1.085 4.38 4.38 0 01-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 01-1.84-.164 5.544 5.544 0 01-1.512-.493v-2.63a5.033 5.033 0 003.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 00-.074-1.089 2.12 2.12 0 00-.537-.5 5.597 5.597 0 00-.807-.444 27.72 27.72 0 00-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 011.47-.629 7.536 7.536 0 011.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"/></svg> },
  { name: "JavaScript", color: "#F7DF1E", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.405-.6-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.29-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg> },
  { name: "Python", color: "#3776AB", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v1.24H6.84v1.8l-.3.06-.16.06-.13.07-.1.07-.08.07-.06.07-.04.06-.03.05-.02.03-.01.02v.01l-.01.01H14.5l.6-.04.53-.11.47-.17.4-.22.35-.27.28-.3.22-.32.18-.33.13-.32.1-.3.07-.26.05-.21.02-.15V10.53l.01-.06-.04-.28-.1-.21-.14-.18-.18-.17-.2-.15-.22-.13-.24-.12-.25-.1-.26-.08-.26-.07-.26-.05-.25-.04-.25-.02h-5.53l-.49-.04-.43-.12-.37-.18-.32-.23-.27-.27-.22-.3-.18-.33-.14-.34-.1-.34-.07-.32-.05-.29-.02-.24V5.15l-.01-.17.02-.22.05-.28.09-.32.15-.36.2-.38.26-.39.32-.38.37-.35.43-.3.46-.26.5-.2.54-.14.56-.09.57-.04h6.23l-.01-.13M6.47 6.2c-.17 0-.3.05-.4.14a.46.46 0 00-.15.36c0 .14.05.26.15.35.1.1.23.15.4.15.15 0 .28-.05.38-.15a.48.48 0 00.15-.35.47.47 0 00-.15-.36c-.1-.1-.23-.14-.38-.14zm7.95 5.12c-.18 0-.31.05-.41.15a.48.48 0 00-.16.36c0 .14.06.26.16.35.1.1.24.15.41.15.17 0 .3-.05.4-.15a.48.48 0 00.15-.35.48.48 0 00-.15-.36c-.1-.1-.23-.15-.4-.15z"/></svg> },
  { name: "TensorFlow", color: "#FF6F00", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M1.292 5.856L11.54 0v24l-4.095-2.378V7.603l-6.168 3.564.015-5.31zm21.416 5.393l-6.156-3.586v14.98L12.457 24l.001-24 10.25 5.856v5.393z"/></svg> },
  { name: "Docker", color: "#2496ED", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.186.186 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.186.186 0 00-.185-.186H5.136a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.186.186 0 00-.184-.186H2.216a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m23.693-1.32c-.262-.394-.662-.655-1.19-.78a3.137 3.137 0 00-.462-.058c-.31-.012-.623.03-.923.12-.1-.493-.4-.906-.752-1.207a2.237 2.237 0 00-.28-.203l-.287-.168-.15.272a2.653 2.653 0 00-.35 1.036c-.072.43-.032.858.116 1.255a3.252 3.252 0 01-1.266.271H.5a.5.5 0 00-.5.5c-.002.52.06 1.038.185 1.544.17.72.494 1.365.964 1.89.522.582 1.194 1.006 1.96 1.245.928.292 1.946.404 2.958.344a11.08 11.08 0 003.082-.594 8.112 8.112 0 002.438-1.425c1.19-1.02 2.07-2.3 2.65-3.747h.23c.713 0 1.157-.29 1.43-.54.178-.164.322-.364.42-.586l.14-.33z"/></svg> },
];

const techRow2 = [
  { name: "Next.js", color: "#ffffff", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M11.572 0c-.176 0-.31.001-.358.007a19.76 19.76 0 01-.364.033C7.443.346 4.25 2.185 2.228 5.012a11.875 11.875 0 00-2.119 5.243c-.096.659-.108.854-.108 1.747s.012 1.089.108 1.748c.652 4.506 3.86 8.292 8.209 9.695.779.25 1.6.422 2.534.525.363.04 1.935.04 2.299 0 1.611-.178 2.977-.577 4.323-1.264.207-.106.247-.134.219-.158-.02-.013-.9-1.193-1.955-2.62l-1.919-2.592-2.404-3.558a338.739 338.739 0 00-2.422-3.556c-.009-.002-.018 1.579-.023 3.51-.007 3.38-.01 3.515-.052 3.595a.426.426 0 01-.206.214c-.075.037-.14.044-.495.044H7.81l-.108-.068a.438.438 0 01-.157-.171l-.05-.106.006-4.703.007-4.705.072-.092a.645.645 0 01.174-.143c.096-.047.134-.051.54-.051.478 0 .558.018.682.154.035.038 1.337 1.999 2.895 4.361a10760.433 10760.433 0 004.735 7.17l1.9 2.879.096-.063a12.317 12.317 0 002.466-2.163 11.944 11.944 0 002.824-6.134c.096-.66.108-.854.108-1.748 0-.893-.012-1.088-.108-1.747-.652-4.506-3.86-8.292-8.208-9.695a12.597 12.597 0 00-2.499-.523A33.119 33.119 0 0011.573 0zm4.069 7.217c.347 0 .408.005.486.047a.473.473 0 01.237.277c.018.06.023 1.365.018 4.304l-.006 4.218-.744-1.14-.746-1.14v-3.066c0-1.982.01-3.097.023-3.15a.478.478 0 01.233-.296c.096-.05.13-.054.5-.054z"/></svg> },
  { name: "Node.js", color: "#339933", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M11.998 24c-.321 0-.641-.084-.922-.247l-2.936-1.737c-.438-.245-.224-.332-.08-.383.585-.203.703-.25 1.328-.604.065-.037.151-.023.218.017l2.256 1.339a.29.29 0 00.272 0l8.795-5.076a.277.277 0 00.134-.238V6.921a.28.28 0 00-.137-.242l-8.791-5.072a.278.278 0 00-.271 0L3.075 6.68a.284.284 0 00-.139.241v10.15a.27.27 0 00.138.236l2.409 1.392c1.307.654 2.108-.116 2.108-.89V7.787c0-.142.114-.253.256-.253h1.115c.139 0 .255.112.255.253v10.021c0 1.745-.95 2.745-2.604 2.745-.508 0-.909 0-2.026-.551L2.28 18.675a1.857 1.857 0 01-.922-1.604V6.921c0-.659.353-1.275.922-1.603L11.075.242a1.93 1.93 0 011.846 0l8.794 5.076c.57.329.924.944.924 1.603v10.15a1.86 1.86 0 01-.924 1.604l-8.794 5.078a1.842 1.842 0 01-.923.247z"/></svg> },
  { name: "Git", color: "#F05032", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M23.546 10.93L13.067.452a1.55 1.55 0 00-2.188 0L8.708 2.627l2.76 2.76a1.838 1.838 0 012.274 2.345l2.66 2.66a1.838 1.838 0 11-1.103 1.041L12.78 8.913v5.61a1.838 1.838 0 11-1.512-.122V8.72a1.838 1.838 0 01-.999-2.413L7.57 3.608.454 10.726a1.55 1.55 0 000 2.189l10.48 10.477a1.55 1.55 0 002.186 0l10.426-10.273a1.55 1.55 0 000-2.189z"/></svg> },
  { name: "SQL Server", color: "#CC2927", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M4.105 4.438c-.058.063-.075.131-.058.314.026.273.114.459.408.863.196.269.283.403.296.474a.478.478 0 01-.02.235c-.075.229-.263.403-.661.609a.09.09 0 00-.043.058c-.002.032.023.058.057.058h.023c.293-.087.581-.277.743-.49.096-.127.14-.247.148-.407.006-.102 0-.139-.055-.296-.087-.257-.099-.37-.049-.474.046-.096.049-.096.12-.023.108.11.354.515.395.655.032.108.035.145.015.221a.93.93 0 01-.156.277c-.046.058-.072.1-.06.1.097 0 .413-.379.474-.563.04-.122.029-.23-.04-.403l-.263-.628a.782.782 0 01-.066-.277c0-.1.017-.14.09-.218.128-.14.128-.14 0-.14-.105 0-.241.072-.365.194-.108.105-.176.207-.4.591-.238.411-.29.48-.365.474-.03 0-.009-.084.084-.332a2.42 2.42 0 00.131-.481c.015-.122 0-.178-.06-.247-.08-.09-.258-.14-.413-.122-.044.008-.073.014-.081.029zm17.184 9.58c-.04.032-.148.037-.32.018l-.09-.009c-.044 0-.046.004-.024.046.1.191.283.305.445.284.037 0 .046-.012.046-.055 0-.106-.013-.32-.057-.284z"/></svg> },
  { name: "MongoDB", color: "#47A248", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z"/></svg> },
  { name: "Postman", color: "#FF6C37", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M13.527.099C6.955-.744.942 3.9.099 10.473c-.843 6.572 3.8 12.584 10.373 13.428 6.573.843 12.587-3.801 13.428-10.374C24.744 6.955 20.101.943 13.527.099zm2.471 7.485a.855.855 0 011.207 0 .853.853 0 010 1.207l-3.128 3.128a.855.855 0 01-1.207 0 .853.853 0 010-1.207l3.128-3.128zM8.044 14.63l1.04 1.04a.853.853 0 010 1.207.855.855 0 01-1.207 0l-1.04-1.04a.853.853 0 010-1.207.855.855 0 011.207 0zm-3.108 1.932l2.128 2.128a.855.855 0 01.218.403l.345 1.727a.855.855 0 01-1.025 1.025l-1.727-.345a.855.855 0 01-.403-.218L2.344 19.154a.855.855 0 010-1.207l1.385-1.385a.855.855 0 011.207 0z"/></svg> },
  { name: "Keras", color: "#D00000", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M24 0H0v24h24V0zm-8.267 18.648l-4.6-6.234-.585-.39v6.624H8.22V5.352h2.328v6.456l.516-.432 4.26-6.024h2.748l-5.076 6.84 5.34 6.456h-2.604z"/></svg> },
  { name: "HTML5", color: "#E34F26", svg: <svg viewBox="0 0 24 24" fill="currentColor" className="w-8 h-8"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.07-.757.507-5.627H6.484l1.376 15.361 4.129 1.31v-.004l.09.032 4.164-1.318.587-6.452H10.18l-.17-1.83z"/></svg> },
];

export default function MarqueeSection() {
  const ref = useRef(null);
  const { scrollYProgress } = useScroll({
    target: ref,
    offset: ["start end", "end start"],
  });

  // Smooth spring for parallax
  const smoothProgress = useSpring(scrollYProgress, {
    stiffness: 100,
    damping: 30,
    restDelta: 0.001,
  });

  // Row 1 moves right as you scroll down, left as you scroll up
  const x1 = useTransform(smoothProgress, [0, 1], ["-20%", "10%"]);
  // Row 2 moves left as you scroll down, right as you scroll up (opposite)
  const x2 = useTransform(smoothProgress, [0, 1], ["10%", "-20%"]);

  return (
    <section ref={ref} className="relative py-24 overflow-hidden">
      {/* Top divider */}
      <div className="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-purple/20 to-transparent" />

      {/* Section label */}
      <div className="text-center mb-12">
        <span className="text-xs font-semibold uppercase tracking-[0.3em] text-muted-foreground">
          Technologies I Work With
        </span>
      </div>

      {/* Row 1 — moves right on scroll down */}
      <motion.div
        style={{ x: x1 }}
        className="flex items-center gap-12 mb-10 will-change-transform"
      >
        {[...techRow1, ...techRow1, ...techRow1].map((tech, i) => (
          <div
            key={`r1-${i}`}
            className="flex-shrink-0 flex items-center gap-3 px-6 py-4 rounded-2xl border border-border/50 bg-surface-light/30 hover:border-neon-purple/30 hover:bg-surface-lighter/50 transition-all duration-500 group cursor-default"
          >
            <div
              className="opacity-50 group-hover:opacity-100 transition-opacity duration-500"
              style={{ color: tech.color }}
            >
              {tech.svg}
            </div>
            <span className="text-sm font-medium text-muted-foreground group-hover:text-foreground transition-colors duration-300 whitespace-nowrap">
              {tech.name}
            </span>
          </div>
        ))}
      </motion.div>

      {/* Row 2 — moves left on scroll down (opposite direction) */}
      <motion.div
        style={{ x: x2 }}
        className="flex items-center gap-12 will-change-transform"
      >
        {[...techRow2, ...techRow2, ...techRow2].map((tech, i) => (
          <div
            key={`r2-${i}`}
            className="flex-shrink-0 flex items-center gap-3 px-6 py-4 rounded-2xl border border-border/50 bg-surface-light/30 hover:border-neon-blue/30 hover:bg-surface-lighter/50 transition-all duration-500 group cursor-default"
          >
            <div
              className="opacity-50 group-hover:opacity-100 transition-opacity duration-500"
              style={{ color: tech.color }}
            >
              {tech.svg}
            </div>
            <span className="text-sm font-medium text-muted-foreground group-hover:text-foreground transition-colors duration-300 whitespace-nowrap">
              {tech.name}
            </span>
          </div>
        ))}
      </motion.div>

      {/* Bottom divider */}
      <div className="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-neon-blue/20 to-transparent" />
    </section>
  );
}
